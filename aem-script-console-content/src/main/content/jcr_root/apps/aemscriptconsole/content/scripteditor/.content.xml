<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
          xmlns:nt="http://www.jcp.org/jcr/nt/1.0" xmlns:rep="internal"
          jcr:mixinTypes="[rep:AccessControllable]"
          jcr:primaryType="nt:unstructured"
          jcr:title="AEM Script Console Editor"
          sling:resourceType="granite/ui/components/foundation/page">
    <head jcr:primaryType="nt:unstructured">
        <viewport
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/foundation/admin/page/viewport"/>
        <meta
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/foundation/meta"
                content="chrome=1"
                name="X-UA-Compatible"/>
        <favicon
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/foundation/page/favicon"/>
        <clientlibs
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/foundation/includeclientlibs"
                categories="[coralui2,granite.ui.foundation,granite.ui.foundation.admin,aemscriptconsole]"/>
    </head>
    <body
            jcr:primaryType="nt:unstructured"
            sling:resourceType="granite/ui/components/foundation/page/body">
        <layout
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/endor/layouts/page"/>
        <rail
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/endor/navcolumns"
                currentId="aem-script-console"
                srcPath="[cq/core/content/nav,granite/core/content/nav]"/>
        <breadcrumbs
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/foundation/navigation">
            <layout
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/endor/layouts/breadcrumbs"/>
            <items jcr:primaryType="nt:unstructured"/>
        </breadcrumbs>
        <title
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/foundation/hyperlink"
                text="AEM Script Console"/>
        <helpactivator
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/foundation/hyperlink"
                href="#help-popover"
                text="Help"
                toggle="popover"/>
        <user
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/endor/user"
                href="#granite-user-properties"/>
        <account
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/foundation/include"
                path="granite/ui/content/userproperties"/>
        <content
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/foundation/container">
            <layout
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/endor/layouts/content"/>
            <header
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/foundation/container">
                <layout
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/foundation/layouts/mode"
                        group="aemscriptconsole-mode"/>
                <items jcr:primaryType="nt:unstructured">
                    <default
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/foundation/navigation">
                        <layout
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/endor/layouts/actionbar"/>
                        <items jcr:primaryType="nt:unstructured">
                            <execute
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/endor/actionbar/button"
                                    class="execute-script"
                                    icon="icon-checkCircle"
                                    text="Run"
                                    title="Run"/>
                            <clear
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/endor/actionbar/button"
                                    class="clear-editor"
                                    icon="icon-delete"
                                    text="Clear"
                                    title="Clear"/>
                            <createScriptNode
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/endor/actionbar/button"
                                    class="create-new"
                                    icon="icon-add"
                                    text="Create New"
                                    title="Create new Script"/>
                            <saveScriptNode
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/endor/actionbar/button"
                                    class="save-script"
                                    icon="icon-checkCircle"
                                    text="Save"
                                    title="Save to ScriptNode"/>
                            <codeEditor
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/endor/actionbar/button"
                                    class="asconsole-switch-to-editor"
                                    icon="icon-edit"
                                    text="Editor"
                                    title="Code Editor"/>
                            <formEditor
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/endor/actionbar/button"
                                    class="asconsole-switch-to-form"
                                    icon="icon-edit"
                                    text="Form"
                                    title="Form Editor"/>
                        </items>
                    </default>
                </items>
            </header>
            <content
                    jcr:primaryType="nt:unstructured"
                    sling:resourceType="granite/ui/components/foundation/container">
                <items jcr:primaryType="nt:unstructured">

                    <editor
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="aemscriptconsole/components/console"
                            class="aemscriptconsole"
                            id="aemscriptconsole"/>
                    <saveModal
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/foundation/form"
                            jcr:title="Save Script Node"
                            id="saveScriptModal">
                        <layout
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/foundation/layouts/modal"
                                formStyle="vertical"
                                closable="{Boolean}True"
                                type="default"/>
                        <items jcr:primaryType="nt:unstructured">
                            <scriptName
                                    jcr:primaryType="nt:unstructured"
                                    fieldLabel="Script Name"
                                    fieldDescription="Please enter a name for the script node."
                                    required="{Boolean}True"
                                    renderReadOnly="{Boolean}False"
                                    name="scriptName"
                                    sling:resourceType="granite/ui/components/foundation/form/textfield" />
                            <savePath
                                    jcr:primaryType="nt:unstructured"
                                    fieldLabel="Location"
                                    fieldDescription="Please select the location where to save the script."
                                    required="{Boolean}True"
                                    renderReadOnly="{Boolean}False"
                                    name="savePath"
                                    sling:resourceType="granite/ui/components/foundation/form/pathbrowser"/>
                        </items>
                        <footer
                                jcr:primaryType="nt:unstructured">
                            <close
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/foundation/button"
                                    text="Cancel">
                                <layoutConfig
                                        jcr:primaryType="nt:unstructured"
                                        close="{Boolean}True"/>
                            </close>
                            <submit
                                    jcr:primaryType="nt:unstructured"
                                    sling:resourceType="granite/ui/components/foundation/form/submit"
                                    text="Save"/>
                        </footer>
                    </saveModal>
                </items>
            </content>
        </content>
    </body>
</jcr:root>
